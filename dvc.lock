schema: '2.0'
stages:
  label_data_extract:
    cmd: python pipelines/extract_data_to_label.py 
      "inputs/label_data/2025-08.enwiki.2025-08.tsv" 1h 
      "inputs/labeled_data/aug_labeled_v2.csv" 
      "outputs/label_data/2025-08.enwiki.2025-08.csv" 
      "outputs/counts_2025-08.enwiki.2025-08.csv"
    deps:
    - path: inputs/label_data/2025-08.enwiki.2025-08.tsv
      hash: md5
      md5: d29c79b5648885ca11f29af6f6198def
      size: 3304552022
    - path: inputs/labeled_data/aug_labeled_v2.csv
      hash: md5
      md5: 54ac560de0358bca6958f72c0613ec00
      size: 137692
    - path: pipelines/extract_data_to_label.py
      hash: md5
      md5: 68763a8fdd08901779e7d4b8102f1989
      size: 3236
    - path: wikilacra/stream.py
      hash: md5
      md5: 9d9de9cf07d0cf268151fe9348b0a590
      size: 3826
    outs:
    - path: outputs/counts_2025-08.enwiki.2025-08.csv
      hash: md5
      md5: a66982a806ee0c73673f8deeb360ce79
      size: 416860588
    - path: outputs/label_data/2025-08.enwiki.2025-08.csv
      hash: md5
      md5: e8af1b861ae41ea7505e3ee04e9b59f3
      size: 199716
  labeled_data_transform:
    cmd: python pipelines/labeled_data_transform.py "2025-08-01 00:00:00" 6 
      "inputs/labeled_data/aug_labeled_v3.csv" 
      "outputs/labeled_transformed/labels_only_aug25.csv"
    deps:
    - path: inputs/labeled_data/aug_labeled_v3.csv
      hash: md5
      md5: f291025d9aa4c27b226641cb57e08ced
      size: 202664
    - path: pipelines/labeled_data_transform.py
      hash: md5
      md5: ab62a0fcab93c4592c8d400deb405953
      size: 1308
    outs:
    - path: outputs/labeled_transformed/labels_only_aug25.csv
      hash: md5
      md5: d2d9862ae9c63aa38d42753ce46e38ce
      size: 201160
  train-RF:
    cmd: python pipelines/RF.py "outputs/labeled_engineered/" "engineered_aug25"
      f1 4583 2 1 "(1,10,10,'lin')" 0 "(200,500)" 0.2 KFold 5
    deps:
    - path: outputs/labeled_engineered/engineered_aug25.csv
      hash: md5
      md5: 5d7b32c55ce38a5a90dc247105be7eaa
      size: 451528
    - path: pipelines/RF.py
      hash: md5
      md5: f4052afdc164491e795b4692ceb41020
      size: 5448
    - path: wikilacra/data.py
      hash: md5
      md5: 22f318628b1e1c2ac35a2f1c85d11230
      size: 1984
    - path: wikilacra/scoring.py
      hash: md5
      md5: 9f7e8e3491fb727a57a8ed643f12fb07
      size: 1453
    outs:
    - path: dvclive/RF/metrics.json
      hash: md5
      md5: 5892c4f59c6c098349eb052e05f91b83
      size: 754
    - path: dvclive/RF/params.yaml
      hash: md5
      md5: 78366c671aae9dab399054734fd7396a
      size: 32
    - path: dvclive/RF/plots/images/ConfusionMatrixDisplay.png
      hash: md5
      md5: 7f2a673b98c1a0efbe4f5b3649806610
      size: 15429
    - path: dvclive/RF/plots/images/FeatureImportances.png
      hash: md5
      md5: a36458ddaed20bb59d8576861a46363b
      size: 68950
  features:
    cmd: python pipelines/engineer-features.py 6 1Min 10 
      "inputs/label_data/2025-08.enwiki.2025-08.tsv" 
      "inputs/labeled_data/aug_labeled_v3.csv" "outputs/labeled_engineered/" 
      "engineered_aug25" "2025-08-01 00:00:00" "2025-08-31 23:59:59"
    deps:
    - path: inputs/label_data/2025-08.enwiki.2025-08.tsv
      hash: md5
      md5: d29c79b5648885ca11f29af6f6198def
      size: 3304552022
    - path: inputs/labeled_data/aug_labeled_v3.csv
      hash: md5
      md5: f291025d9aa4c27b226641cb57e08ced
      size: 202664
    - path: pipelines/engineer-features.py
      hash: md5
      md5: 692204179020127dc1a9b7688cd13875
      size: 10163
    - path: wikilacra/__init__.py
      hash: md5
      md5: 2cfe281f7badd3ca0379b6c582aeaab1
      size: 2399
    - path: wikilacra/features.py
      hash: md5
      md5: 98063e865d7c751df6c25343cea6dbf6
      size: 7642
    - path: wikilacra/stream.py
      hash: md5
      md5: 9d9de9cf07d0cf268151fe9348b0a590
      size: 3826
    outs:
    - path: outputs/labeled_engineered/engineered_aug25.csv
      hash: md5
      md5: 5d7b32c55ce38a5a90dc247105be7eaa
      size: 451528
    - path: outputs/labeled_engineered/engineered_aug25_endog_cols.txt
      hash: md5
      md5: 70bfdfd148a0b5bb84cee643cff64de2
      size: 10
    - path: outputs/labeled_engineered/engineered_aug25_exog_cols.txt
      hash: md5
      md5: 15555fa3885eda461cf0ba1f6a0a5fce
      size: 662
  train-XGBT:
    cmd: python pipelines/XGBT.py "outputs/labeled_engineered/" 
      "engineered_aug25" f1 4583 2 1 "(1,10,10,'lin')" 0.2 KFold 5
    deps:
    - path: outputs/labeled_engineered/engineered_aug25.csv
      hash: md5
      md5: 5d7b32c55ce38a5a90dc247105be7eaa
      size: 451528
    - path: pipelines/XGBT.py
      hash: md5
      md5: 871a6b89d511090ee3edf76aa018f3cf
      size: 4821
    - path: wikilacra/data.py
      hash: md5
      md5: 22f318628b1e1c2ac35a2f1c85d11230
      size: 1984
    - path: wikilacra/scoring.py
      hash: md5
      md5: 9f7e8e3491fb727a57a8ed643f12fb07
      size: 1453
    outs:
    - path: dvclive/XGBT/metrics.json
      hash: md5
      md5: 28c95895ccd579e33a15b359deab1fc8
      size: 752
    - path: dvclive/XGBT/params.yaml
      hash: md5
      md5: 69b024339360517cf9c844d7e87dd09d
      size: 13
    - path: dvclive/XGBT/plots/images/ConfusionMatrixDisplay.png
      hash: md5
      md5: 344582dfb9dee32a74a7685c054102f9
      size: 16820
    - path: dvclive/XGBT/plots/images/FeatureImportances.png
      hash: md5
      md5: eb47826bb606e00952c6c5378c9699d2
      size: 68622
  train-LinSVC:
    cmd: python pipelines/LinearSVC.py "outputs/labeled_engineered/" 
      "engineered_aug25" f1 4583 2 0.2 KFold 5 standard 1 "(0.001,100,6,'geom')"
      "['squared_hinge']"
    deps:
    - path: outputs/labeled_engineered/engineered_aug25.csv
      hash: md5
      md5: 5d7b32c55ce38a5a90dc247105be7eaa
      size: 451528
    - path: pipelines/LinearSVC.py
      hash: md5
      md5: e6668e60129a799a0e6ba30bad770bcd
      size: 5447
    - path: wikilacra/data.py
      hash: md5
      md5: 22f318628b1e1c2ac35a2f1c85d11230
      size: 1984
    - path: wikilacra/scaling.py
      hash: md5
      md5: 0bee0af26a263554c6abfe0c658ed234
      size: 2879
    - path: wikilacra/scoring.py
      hash: md5
      md5: 9f7e8e3491fb727a57a8ed643f12fb07
      size: 1453
    outs:
    - path: dvclive/LinSVC/metrics.json
      hash: md5
      md5: 88600c532a9395897c20b7944fe6bdc4
      size: 749
    - path: dvclive/LinSVC/params.yaml
      hash: md5
      md5: 3a56e105077de0f5647c590f7904b9e1
      size: 37
    - path: dvclive/LinSVC/plots/images/ConfusionMatrixDisplay.png
      hash: md5
      md5: 00a4c9661bf2bbdf8c2ffa309e868055
      size: 16783
  train-NN:
    cmd: python pipelines/NN.py "outputs/labeled_engineered/" "engineered_aug25"
      f1 4583 2 0.2 0.1 standard 0.0001 0.2 2 8 ReLU 10 3
    deps:
    - path: outputs/labeled_engineered/engineered_aug25.csv
      hash: md5
      md5: 5d7b32c55ce38a5a90dc247105be7eaa
      size: 451528
    - path: pipelines/NN.py
      hash: md5
      md5: 68cd137483820b37c3967653f246f485
      size: 7798
    - path: wikilacra/data.py
      hash: md5
      md5: 22f318628b1e1c2ac35a2f1c85d11230
      size: 1984
    - path: wikilacra/scaling.py
      hash: md5
      md5: 0bee0af26a263554c6abfe0c658ed234
      size: 2879
    - path: wikilacra/scoring.py
      hash: md5
      md5: 9f7e8e3491fb727a57a8ed643f12fb07
      size: 1453
    outs:
    - path: dvclive/NN/metrics.json
      hash: md5
      md5: b60ba200d3589881a942b9b69c4d12f9
      size: 596
    - path: dvclive/NN/plots/images/ConfusionMatrixDisplay.png
      hash: md5
      md5: 66ef372c6392ec70a5b140171b6eaa95
      size: 15777
    - path: dvclive/NN/plots/metrics/train
      hash: md5
      md5: fbae70c466966706c47f1c89364fa435.dir
      size: 219
      nfiles: 1
    - path: dvclive/NN/plots/metrics/val
      hash: md5
      md5: 54dde0e06f0cf481dc3918462a1d9c72.dir
      size: 218
      nfiles: 1
